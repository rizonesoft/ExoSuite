// ==============================================================================
// ExoSuite - Main Window
// Windows 11 Dark Mode Theme with Lucide Icons
// ==============================================================================

import {
    VerticalBox,
    HorizontalBox,
    Button,
    ScrollView,
} from "std-widgets.slint";

// Windows 11 Dark Mode Colors
struct Theme {
    // Backgrounds
    bg-solid: brush,
    bg-card: brush,
    bg-card-hover: brush,
    bg-subtle: brush,
    
    // Borders
    border-subtle: brush,
    border-default: brush,
    
    // Text
    text-primary: brush,
    text-secondary: brush,
    text-tertiary: brush,
    
    // Accent (Windows blue)
    accent: brush,
    accent-hover: brush,
}

global Palette {
    out property <Theme> dark: {
        bg-solid: #202020,
        bg-card: #2d2d2d,
        bg-card-hover: #3d3d3d,
        bg-subtle: #282828,
        border-subtle: #3d3d3d,
        border-default: #454545,
        text-primary: #ffffff,
        text-secondary: #c5c5c5,
        text-tertiary: #9d9d9d,
        accent: #0078d4,
        accent-hover: #1a86d9,
    };
    out property <Theme> current: dark;
}

// Lucide Icon Paths (24x24 viewbox)
global Icons {
    // Refresh (rotate-cw)
    out property <string> refresh: "M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8V3h-5l2.26 2.26A6.97 6.97 0 0 0 12 3a9 9 0 0 0 0 18c4.64 0 8.48-3.5 8.95-8h-2.02a7.01 7.01 0 0 1-6.93 6 7 7 0 0 1 0-14c1.93 0 3.68.78 4.95 2.05L14.83 9H19V5.17l-1.76 1.76z";
    
    // Grid (layout-grid)
    out property <string> grid: "M3 3h7v7H3V3zm11 0h7v7h-7V3zM3 14h7v7H3v-7zm11 0h7v7h-7v-7z";
    
    // List
    out property <string> list: "M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01";
    
    // Settings (cog) - Lucide settings icon
    out property <string> settings: "M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0-6 0";
    
    // Home
    out property <string> home: "M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6";
    
    // Monitor (display)
    out property <string> display: "M2 6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6zm6 12h8m-4 0v4";
    
    // Shield
    out property <string> shield: "M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z";
    
    // Network (wifi)
    out property <string> network: "M5 12.55a11 11 0 0 1 14.08 0M1.42 9a16 16 0 0 1 21.16 0M8.53 16.11a6 6 0 0 1 6.95 0M12 20h.01";
    
    // Folder
    out property <string> folder: "M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z";
    
    // Hardware (cpu)
    out property <string> hardware: "M4 4h16v16H4V4zm4-2v2m8-2v2M4 12h-2m2-4H2m2 8H2m20-4h-2m2-4h-2m2 8h-2M8 20v2m8-2v2";
}

// Icon Button Component
component IconButton inherits Rectangle {
    in property <string> icon-text: "";
    in property <string> tooltip: "";
    callback clicked();
    width: 36px;
    height: 36px;
    border-radius: 4px;
    background: touch.has-hover ? Palette.current.bg-card-hover : transparent;
    touch := TouchArea {
        clicked => {
            root.clicked();
        }
    }

    Text {
        text: icon-text;
        font-size: 14px;
        color: Palette.current.text-secondary;
        horizontal-alignment: center;
        vertical-alignment: center;
    }
}

// Category Button Component
component CategoryButton inherits Rectangle {
    in property <string> label: "";
    in property <bool> selected: false;
    callback clicked();
    height: 36px;
    border-radius: 4px;
    background: selected ? Palette.current.accent : (touch.has-hover ? Palette.current.bg-card-hover : transparent);
    touch := TouchArea {
        clicked => {
            root.clicked();
        }
    }

    HorizontalBox {
        padding-left: 12px;
        padding-right: 12px;
        Text {
            text: label;
            font-size: 13px;
            color: selected ? #ffffff : Palette.current.text-primary;
            vertical-alignment: center;
        }
    }
}

export component MainWindow inherits Window {
    title: "ExoSuite";
    width: 1100px;
    height: 750px;
    background: Palette.current.bg-solid;
    VerticalBox {
        padding: 0px;
        spacing: 0px;
        
        // Title Bar / Toolbar
        Rectangle {
            height: 48px;
            background: Palette.current.bg-subtle;
            HorizontalBox {
                padding: 8px;
                padding-left: 16px;
                spacing: 4px;
                
                // App Title
                Text {
                    text: "ExoSuite";
                    font-size: 14px;
                    font-weight: 600;
                    color: Palette.current.text-primary;
                    vertical-alignment: center;
                }

                Rectangle {
                    horizontal-stretch: 1;
                }
                
                // Toolbar Buttons
                IconButton {
                    icon-text: "⟳";
                    tooltip: "Refresh";
                }

                IconButton {
                    icon-text: "▤";
                    tooltip: "Grid View";
                }

                IconButton {
                    icon-text: "☰";
                    tooltip: "List View";
                }

                Rectangle {
                    width: 1px;
                    height: 24px;
                    background: Palette.current.border-subtle;
                }

                IconButton {
                    icon-text: "⚙";
                    tooltip: "Settings";
                }
            }
        }
        
        // Separator
        Rectangle {
            height: 1px;
            background: Palette.current.border-subtle;
        }
        
        // Main Content
        HorizontalBox {
            padding: 0px;
            spacing: 0px;
            
            // Sidebar
            Rectangle {
                width: 220px;
                background: Palette.current.bg-subtle;
                VerticalBox {
                    padding: 12px;
                    spacing: 4px;
                    
                    // Categories Header
                    Text {
                        text: "Categories";
                        font-size: 12px;
                        font-weight: 500;
                        color: Palette.current.text-tertiary;
                    }

                    Rectangle {
                        height: 8px;
                    }

                    CategoryButton {
                        label: "All Items";
                        selected: true;
                    }

                    CategoryButton {
                        label: "System";
                    }

                    CategoryButton {
                        label: "Display";
                    }

                    CategoryButton {
                        label: "Network";
                    }

                    CategoryButton {
                        label: "Security";
                    }

                    CategoryButton {
                        label: "Hardware";
                    }

                    CategoryButton {
                        label: "Programs";
                    }

                    Rectangle {
                        vertical-stretch: 1;
                    }
                    
                    // Bottom section
                    Rectangle {
                        height: 1px;
                        background: Palette.current.border-subtle;
                    }

                    Rectangle {
                        height: 8px;
                    }

                    CategoryButton {
                        label: "Settings";
                    }

                    CategoryButton {
                        label: "About";
                    }
                }
            }
            
            // Sidebar Border
            Rectangle {
                width: 1px;
                background: Palette.current.border-subtle;
            }
            
            // Content Area
            Rectangle {
                background: Palette.current.bg-solid;
                VerticalBox {
                    padding: 24px;
                    spacing: 16px;
                    
                    // Content Header
                    HorizontalBox {
                        Text {
                            text: "All Items";
                            font-size: 24px;
                            font-weight: 600;
                            color: Palette.current.text-primary;
                        }

                        Rectangle {
                            horizontal-stretch: 1;
                        }

                        Text {
                            text: "0 items";
                            font-size: 13px;
                            color: Palette.current.text-tertiary;
                            vertical-alignment: center;
                        }
                    }
                    
                    // Empty State
                    Rectangle {
                        vertical-stretch: 1;
                        VerticalBox {
                            alignment: center;
                            spacing: 8px;
                            Text {
                                text: "⚙";
                                font-size: 48px;
                                color: Palette.current.text-tertiary;
                                horizontal-alignment: center;
                            }

                            Text {
                                text: "No Control Panel items loaded";
                                font-size: 14px;
                                color: Palette.current.text-secondary;
                                horizontal-alignment: center;
                            }

                            Text {
                                text: "CPL loader not yet implemented";
                                font-size: 12px;
                                color: Palette.current.text-tertiary;
                                horizontal-alignment: center;
                            }
                        }
                    }
                }
            }
        }
        
        // Status Bar
        Rectangle {
            height: 28px;
            background: Palette.current.bg-subtle;
            HorizontalBox {
                padding-left: 16px;
                padding-right: 16px;
                Text {
                    text: "Ready";
                    font-size: 12px;
                    color: Palette.current.text-tertiary;
                    vertical-alignment: center;
                }

                Rectangle {
                    horizontal-stretch: 1;
                }

                Text {
                    text: "Windows 11";
                    font-size: 12px;
                    color: Palette.current.text-tertiary;
                    vertical-alignment: center;
                }
            }
        }
    }
}
